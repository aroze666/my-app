<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf8" />
    <title>Music</title>
  </head>
  <body>
    <h1>Music</h1>
    <input type="button" value="play" id="play" />
    <input type="button" value="stop" id="stop" />
    <p>Music is science.</p>
    <script>
      const audioContext = new AudioContext();
      const buffer = audioContext.createBuffer(
        1,
        audioContext.sampleRate * 1,
        audioContext.sampleRate
      );
      const channelData = buffer.getChannelData(0);
      for (let i = 0; i < buffer.length; i++) {
        if (i % 2 == 0) {
          channelData[i] = Math.random() * 2 - 1;
        }
      }
      const whiteNoiseSource = audioContext.createBufferSource();
      whiteNoiseSource.buffer = buffer;

      const primaryGainControl = audioContext.createGain();
      primaryGainControl.gain.setValueAtTime(0.05, 0);

      whiteNoiseSource.connect(primaryGainControl);
      primaryGainControl.connect(audioContext.destination);

      const play = document.getElementById("play");
      play.addEventListener("click", () => {
        whiteNoiseSource.start();
      });
    </script>
  </body>
</html>
